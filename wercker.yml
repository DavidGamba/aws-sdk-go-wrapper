box: wercker/golang
build:
  steps:
    - wercker/setup-go-workspace@1.2.0
#    - wercker/golint@1.1.0

    - script:
        name: go get
        code: |
          go get -t ./...
          
    - script:
        name: go build
        code: |-
          go build ./...
          go build -o $WERCKER_OUTPUT_DIR/dynamodb ./dynamodb 
                
    - script:
        name: go test
        code: |
          go test -coverprofile=dynamodb.coverprofile ./dynamodb

    - script:
        name: Coveralls.io
        code: |-
          go get github.com/modocache/gover
          go get github.com/mattn/goveralls
          gover
          goveralls -coverprofile=gover.coverprofile -package="./..." -service="wercker.com" -repotoken="$COVERALLS_TOKEN"
